# E. Римлянин

Вам дано число, записанное римскими цифрами. Получите это же число в обычной записи (арабскими цифрами).

Римская запись чисел может включать следующие символы:

    ’I’ — 1
    ’V’ — 5
    ’X’ — 10
    ’L’ — 50
    ’C’ — 100
    ’D’ — 500
    ’M’ — 1000

Цифры ’I’, ’X’, ’C’ и ’M’ нельзя использовать более трех раз подряд. Цифры ’V’, ’L’ и ’D’ нельзя использовать более одного раза во всей записи числа.

Обыкновенно цифры записывают по убыванию слева направо. Например, число 350 будет записано как ’CCCL’.

Однако есть исключения:

    Чтобы получить ’4’ или ’9’, надо поставить ’I’ перед ’V’ или ’X’ соответственно
    Чтобы получить ’40’ или ’90’, надо поставить ’X’ перед ’L’ или ’C’.
    Чтобы получить ’400’ или ’900’, надо поставить ’C’ перед ’D’ или ’M’.


## Формат ввода

В единственной строке дана запись числа римскими цифрами. Длина записи не превосходит 15.
## Формат вывода

Выведите число, записанное арабскими цифрами. Если запись числа некорректная, то выведите -1.
## Пример 1
<table>
<tr><td><b>Ввод</b></td><td><b>Вывод</b></td></tr>
<tr><td>VIV
</td><td>-1</td></tr>
</table>

## Пример 2
<table>
<tr><td><b>Ввод</b></td><td><b>Вывод</b></td></tr>
<tr><td>II</td><td>2</td></tr>
</table>

## Пример 3
<table>
<tr><td><b>Ввод</b></td><td><b>Вывод</b></td></tr>
<tr><td>MCMLXI
</td><td>1961</td></tr>
</table>


---
# Решение

Не уверен, что условие задачи полностью корректно, так что переформулирую задачу: нужно написать конвертер из чисел, записанных римскими цифрами в арабские.

Я рассматриваю каждую римскую цифру, как сущность с двумя свойствами: "роль" (1 или 5) и "разряд" (1, 10, 100...)

Конвертация происходит таким образом: число передаётся как массив рун, и до тех пор, пока длина этого массива рун не станет равной нулю, извлекаем из него корректный префикс, соответствующий десятичному разряду, и суммируем в аккумулятор его числовое значение.

Например: (MCMLXI) = 1000 + (CMLXI) = 1000 + 900 + (LXI) = 1000 + 900 + 60 + (I) = 1961

При этом проверяется, что каждый следующий извлечённый разряд строго меньше предыдущего, иначе число некорректно.

Извлечение префикса:

Если роль первого символа "1", то могут быть такие варианты: IV (предваряющие единицы к пятёрке того же разряда), IX (предваряющие к единице следующего разряда), II - единицы сами по себе

С чем конкретно мы имеем дело, становится однозначно понятно, когда "единицы этого разряда" заканчиваются, и мы видим следующий символ. В зависимости от того, что это за символ, либо успешно завершается префикс, либо вообще возвращается ошибка, если это невозможный символ (более 3 единиц подряд, более одной предваряющей единицы, следующий символ не может предварятся такой единицей, напр. IC вместо возможных IX или IV)

Если роль первого символа "5", то могут быть такие варианты: V, VI (пятёрка с/без последующих единиц)

Тут проще. После пятёрки либо ничего не идёт, либо идёт не более 3 единиц того же разряда.

Очевидно, реализацию можно более локанично описать регекспами.
